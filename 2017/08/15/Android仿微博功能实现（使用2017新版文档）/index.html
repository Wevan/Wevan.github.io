<!DOCTYPE html>
<html lang="zh">
    <head>
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.3 -->

    <!-- Title -->
    
    <title>
        
            Android仿微博功能实现（使用2017新版文档） | 
        
        ISLET
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    
        <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Wevan">
    <meta name="description" content="blingbling~">
    <meta name="keywords" content="null">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="ISLET">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://wevan.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Android仿微博功能实现（使用2017新版文档） | ISLET">
    <meta property="og:description" content="blingbling~">
    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    


    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#开篇"><span class="post-toc-number">2.</span> <span class="post-toc-text">开篇</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开发前的准备"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">开发前的准备</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#OAuth2-授权"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">OAuth2 授权</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OkHttp使用方法（包含maven使用）"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">OkHttp使用方法（包含maven使用）</span></a></li></ol></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Android仿微博功能实现（使用2017新版文档）
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Wevan</strong>
        <span>8月 15, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Android仿微博功能实现（使用2017新版文档）&url=http://wevan.github.io//2017/08/15/Android仿微博功能实现（使用2017新版文档）/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Android仿微博功能实现（使用2017新版文档）&url=http://wevan.github.io//2017/08/15/Android仿微博功能实现（使用2017新版文档）/index.html&via=Wevan" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://wevan.github.io//2017/08/15/Android仿微博功能实现（使用2017新版文档）/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://wevan.github.io//2017/08/15/Android仿微博功能实现（使用2017新版文档）/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>记录一下自己的学习练习记录，利用一些时间写了这个仿微博，其实一开始是要写一个仿网易音乐的，结果找不到一个音乐接口啊，只好选择了微博来练手，戏剧性的是写了一半的时候，我就找到了音乐接口，笑cry，这里也推荐给大家这个<a href="https://github.com/toddmotto/public-apis" target="_blank" rel="external">API集合</a>，很多你想用的接口里边都有，音乐，视频，数学，机器学习，购物健身娱乐什么的，有兴趣可以收藏下来慢慢玩。<br>有兴趣和我一试的friends。。  </p>
<ul>
<li>从这个项目里可以复习Android几乎所有基础知识，也可以作部分控件和库使用方法的一个小简介。  </li>
<li>代码不是结构很严谨的那种，但是很容易看懂实现过程，我会继续努力的，大神们务必留下指点  </li>
<li>未使用官方SDK开发，想自己把所有套路摸一遍再去看官方的，能更好的知道怎样更好的去实现  <h1 id="开篇"><a href="#开篇" class="headerlink" title="开篇"></a>开篇</h1><h2 id="开发前的准备"><a href="#开发前的准备" class="headerlink" title="开发前的准备"></a>开发前的准备</h2>这里整理了一张开发流程图<img src="http://obhl5boin.bkt.clouddn.com/$%251HO%60WGYABH_1W1USWEH~6.png" alt=""><br>第一步，当然是跑去<a href="http://open.weibo.com/" target="_blank" rel="external">微博开放平台</a>申请开发者账号，新浪这个网页有个坑，就是你很可能点登录登不上（它会没有任何反应的。。），这时候你就需要先去<a href="https://weibo.com/" target="_blank" rel="external">微博首页</a>登录你的微博账号，然后再回到开放平台首页刷新一下页面就登录成功了。登陆成功以后，微链接–&gt;立即创建–&gt;移动应用，填好信息后点击创建，网页反应可能有些慢，稍等就会显示创建成功。此时会跳到应用信息界面，在这个页面我们要获得到App Key和App Secret两个参数的信息，接下来我们要做微博的授权，所以顺带把相关信息填写好，高级信息–&gt;授权回调页，两项我们都填成一样的即可，在这里我填的是百度的首页，这里有第二个坑万万别踩。。。就是回调地址千万不要填写新浪网，其他都可以，否则后续你将得不到你要的信息，其他我们可以暂时不填，到之后用的时候再去填写。<h2 id="OAuth2-授权"><a href="#OAuth2-授权" class="headerlink" title="OAuth2 授权"></a>OAuth2 授权</h2>在文档–&gt;API文档中，可以找到关于OAuth2授权的文档。这里微博也为我们提供了一个很好的<a href="http://open.weibo.com/tools/console" target="_blank" rel="external">API测试工具</a>，但是在授权之前我们还用不着。之后可以使用。从文档我们需要看的信息有，首先是请求的URL。其次，很重要的就是请求的方式。再有就是请求参数，在表格里，属性为true的是必选属性，在这里我们要传递两个参数，可以从说明中看到是刚刚获取到的APPKEY和填写的授权回调地址，授权回调地址在这里，就是在授权完成返回结果的时候，可以从中获取到返回的参数所使用的。示例里使用了Get请求方法。  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">//请求</div><div class="line">https://api.weibo.com/oauth2/authorize?client_id=123050457758183&amp;redirect_uri=http://www.example.com/response&amp;response_type=code</div><div class="line"></div><div class="line">//同意授权后会重定向</div><div class="line">http://www.example.com/response&amp;code=CODE</div><div class="line">```  </div><div class="line">这里我网络请求使用了OkHttp，get请求直接访问URL，将参数直接加在URL后边（多个参数用&amp;连接），直接访问即可。</div><div class="line">POST方法后续介绍使用方法。  </div><div class="line">这里我们可以开始   请求OAuth授权    ，我使用了一个WebView来加载授权页面，  </div><div class="line">```JAVA</div><div class="line"> final WebView webView = (WebView) findViewById(R.id.webView);</div><div class="line">        //管理WebView</div><div class="line">        WebSettings webSettings = webView.getSettings();</div><div class="line">        //启用JavaScript调用功能</div><div class="line">        webSettings.setJavaScriptEnabled(true);</div><div class="line">        //启用缩放网页功能</div><div class="line">        webSettings.setSupportZoom(true);</div><div class="line">        //获取焦点</div><div class="line">        webView.requestFocus();</div><div class="line">        RequestParams params = new RequestParams();</div><div class="line">        String url1 = params.put(Constants.APP_KEY, Constants.REDIRECT_URL);</div><div class="line">        webView.loadUrl(url1);</div><div class="line">        //WebViewClient主要帮助WebView处理各种通知、请求事件</div><div class="line">        webView.setWebViewClient(</div><div class="line">                new WebViewClient() &#123;</div><div class="line">                    @Override</div><div class="line">                    public void onPageStarted(WebView view, String url, Bitmap favicon) &#123;</div><div class="line">                        super.onPageStarted(view, url, favicon);</div><div class="line">                        System.out.println("kaishi");</div><div class="line">                        if (url.startsWith(Constants.REDIRECT_URL)) &#123;</div><div class="line">                            String code = url.split("=")[1];</div><div class="line">                            System.out.println("code is " + code);</div><div class="line">                            requestmsg(code);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>这样当回调页面时候，就可以从其网页URL中截取出code的值，以供下一步获取其他值使用。<br>接下来我们就要拿着code去   获取授权   以得到access_token了。打开相关文档，依旧是首先查看重点三项，URL，请求方式，请求参数，这次用到了POST请求。  </p>
<h3 id="OkHttp使用方法（包含maven使用）"><a href="#OkHttp使用方法（包含maven使用）" class="headerlink" title="OkHttp使用方法（包含maven使用）"></a>OkHttp使用方法（包含maven使用）</h3><p>Okhttp的post请求。这里我们来简介一下okhttp的用法。首先要添加它的依赖，在这里，我们可以去maven仓库去寻找我们需要使用的第三方库。百度maven repository即可。搜索到结果以后，在下方众多版本里，选择使用人数最多的办版本，一般都不会出错。这里我们选择3.4.1版本。并复制他的依赖<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile group: &apos;com.squareup.okhttp3&apos;, name: &apos;okhttp&apos;, version: &apos;3.4.1</div></pre></td></tr></table></figure></p>
<p>我们需要删去group，name，version等标签和引号等，保留冒号，见如下格式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile  &apos;com.squareup.okhttp3:okhttp: 3.4.1&apos;</div></pre></td></tr></table></figure></p>
<p>在app.gradle里添加，然后同步。<br>无论何种请求方式，我们都要先创建一个OkhttpClient实例。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</div></pre></td></tr></table></figure></p>
<p>然后，如果是get请求，我们只需要将处理准备好的URL直接进行访问和获取数据即可。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Request request = <span class="keyword">new</span> Request.Builder().url(准备好的URL).build();</div><div class="line">Call call = client.newCall(request);</div><div class="line">call.enqueue(<span class="keyword">new</span> Callback() &#123;···&#125;);</div></pre></td></tr></table></figure></p>
<p>如果是post请求方式，那么我们则会多使用一个FormBody来放置参数。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">FormBody formBody = <span class="keyword">new</span> FormBody.Builder().add(<span class="string">"client_id"</span>, Constants.APP_KEY)</div><div class="line">                    .add(<span class="string">"client_secret"</span>, Constants.APP_SECRET)</div><div class="line">                    .add(<span class="string">"grant_type"</span>, <span class="string">"authorization_code"</span>)</div><div class="line">                    .add(<span class="string">"code"</span>, code)</div><div class="line">                    .add(<span class="string">"redirect_uri"</span>, Constants.REDIRECT_URL)</div><div class="line">                    .build();</div></pre></td></tr></table></figure></p>
<p>将post请求需要的参数都以键值对的形式通过add方法添进formBody中。然后再使用Request发起请求传递<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">FormBody formBody = <span class="keyword">new</span> FormBody.Builder().add(<span class="string">"client_id"</span>, Constants.APP_KEY)</div><div class="line">                    .add(<span class="string">"client_secret"</span>, Constants.APP_SECRET)</div><div class="line">                    .add(<span class="string">"grant_type"</span>, <span class="string">"authorization_code"</span>)</div><div class="line">                    .add(<span class="string">"code"</span>, code)</div><div class="line">                    .add(<span class="string">"redirect_uri"</span>, Constants.REDIRECT_URL)</div><div class="line">                    .build();</div><div class="line">            OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</div><div class="line">            Request request = <span class="keyword">new</span> Request.Builder().url(<span class="string">"https://api.weibo.com/oauth2/access_token"</span>).post(formBody).build();</div><div class="line">            Call call = client.newCall(request);</div><div class="line">            call.enqueue(<span class="keyword">new</span> Callback() &#123;···&#125;);</div></pre></td></tr></table></figure></p>
<p>然后我们需要将返回的json数据封装成简单的实体类，返回的数据在new Callback() {···}的onresponse方法中获得和处理，这里说明，无论返回的数据是否正确，只要有返回，都会在onResponse中处理，onFailure中不用于返回数据不正确的情况。<br>这里我们可以将返回的数据封装成一个Token类。可以自己手动写，但是现今有工具就要学会使用嘛，往上很多json自动转换POJO的。我使用的是<a href="http://www.bejson.com/json2javapojo/" target="_blank" rel="external">这个</a>,正确格式的json串复制进去生成实体类就好。<br>获取json返回数据，首先<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String responseData = response.body().string();</div></pre></td></tr></table></figure></p>
<p>获取工作到这里就结束了，接下来我们就该开始做解析数据工作。这里我使用的是GSON<br>依旧去maven仓库找到它的依赖，添加到gradle中，我们就可以使用它解析数据了<br>接下来你要做的就是，使用Gson将它封装成实体类，代码如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Token token = <span class="keyword">new</span> Token();</div><div class="line">Gson gson = <span class="keyword">new</span> Gson();</div><div class="line">token = gson.fromJson(responseData, Token.class);</div></pre></td></tr></table></figure></p>
<p>这样我们就完成了封装。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> String access_token=token.getAccess_token();</div><div class="line"><span class="keyword">final</span> String uid=token.getUid();</div></pre></td></tr></table></figure></p>
<p>这些操作应该就很简单了很容易理解了。<br>其他的数据处理也是一样的操作。  下一篇中我们将获取解析好友微博。<br><a href="https://github.com/Wevan/Weebo" target="_blank" rel="external">源码地址</a>，写练手项目博客不带完整源码的都是流氓（逃~</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    




    <!-- 使用 DISQUS -->
    <div id="disqus-comment">
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'http://wevan.github.io/2017/08/15/Android仿微博功能实现（使用2017新版文档）/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://wevan.github.io/2017/08/15/Android仿微博功能实现（使用2017新版文档）/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    queue.offer(function() {
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//islet.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>




                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/04/25/安卓学习中的一些总结（杂乱篇，日后整理）/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.jpg" alt="Wevan's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        438864121@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="About">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                About
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">9</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.svg);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/WeanChristan" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.svg);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.svg);">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/Wevan" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.svg);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;ISLET
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>






    <!-- 使用 DISQUS js 代码 -->
    <script id="dsq-count-scr" src="//islet.disqus.com/count.js" async></script>





<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setTimeout(function(){
            setInterval(function(){
                queue.execNext();
            },200);
        },3000);
    });
</script>

                </main>
            </div>
        </body>
    
</html>
